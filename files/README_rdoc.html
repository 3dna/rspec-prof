<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: README.rdoc</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>README.rdoc</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>README.rdoc
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Wed Dec 15 09:05:52 -0500 2010</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1>rspec-prof</h1>
<p>
Integrates ruby-prof with RSpec, allowing you to easily profile your RSpec
examples.
</p>
<h2>Installation</h2>
<pre>
  gem install rspec-prof
</pre>
<h2>Setup</h2>
<p>
You&#8216;d probably ought to enable the gem in your spec_helper.rb file:
</p>
<pre>
  gem 'rspec-prof'
  require 'rspec-prof'
</pre>
<p>
Or, in Rails 2 (config/environment.rb):
</p>
<pre>
  config.gem 'rspec-prof'
</pre>
<p>
Or, in Rails 3 (Gemfile):
</p>
<pre>
  group :test do
    gem 'rspec-prof'
  end
</pre>
<h2>Usage</h2>
<p>
Easy, peasy: in your spec files, simply add a &quot;profile&quot; context:
</p>
<pre>
  describe MyAwesomeObject do
    context &quot;with an awesome string&quot; do
      subject { MyAwesomeObject.new(&quot;an awesome string&quot;) }

      profile do    # profile these examples!
        it &quot;should be awesome&quot; do
          subject.should be_awesome
        end

        it &quot;should be epic&quot; do
          subject.should be_epic
        end
      end

      # not profiled:
      it &quot;should not be fail&quot; do
        subject.should_not be_fail
      end
    end
  end
</pre>
<p>
The usage overviewed above will, by default, profile each spec
independently and write each result to a file into a profile directory with
a unqiue name.
</p>
<p>
If you need to profile all of them in a single go, that&#8216;s easy too:
</p>
<pre>
  describe MyAwesomeObject do
    # . . .

    profile :all do   # run all of these examples in a single profile
      # . . .
    end
  end
</pre>
<p>
How about displaying the output in flat format to STDOUT? No problem:
</p>
<pre>
  describe MyAwesomeObject do
    # . . .

    profile :file =&gt; STDOUT, :printer =&gt; :flat do   # show flat results to STDOUT
      # . . .
    end
  end
</pre>
<p>
You can also explicitly pass an :each option to profile, if it makes you
feel better. There are a number of other options that you can pass in the
form of a hash, such as min_percent:
</p>
<pre>
  describe MyAwesomeObject do
    # . . .

    profile :min_percent =&gt; 0.01 do
      # . . .
    end
  end
</pre>
<p>
For an exhaustive list of options, see the <a
href="../classes/RSpecProf/Profiler.html">RSpecProf::Profiler</a> class.
</p>
<h3>Suspending <a href="../classes/RSpecProf.html">RSpecProf</a></h3>
<p>
You probably don&#8216;t want to run the profiler every time you run a
spec, because the profiler by its very nature will slow down your app and,
therefore, limit your productivity. To disable profiling without having to
change your specs, simply add this to your spec helper:
</p>
<pre>
  RSpecProf.disable!
</pre>
<p>
&#8230;and you&#8216;re done. In case you need it (but I doubt you will
because it&#8216;s on by default), you can also enable the profiler
similarly:
</p>
<pre>
  RSpecProf.enable!
</pre>
<h2>Known Limitations</h2>
<ul>
<li>ruby-prof cannot multithread. Therefore, <a
href="../classes/RSpecProf.html">RSpecProf</a> also cannot multithread. If
you try, you SHOULD get a warning (but just in case, this is your warning
too) that the profiling cannot be performed due to multithreading. <a
href="../classes/RSpecProf.html">RSpecProf</a> SHOULD disable itself at
this point and allow your specs to run normally.

</li>
<li>Profile blocks cannot be nested within each other. To do so would require
multithreading and, even were it possible, I&#8216;m not sure how <a
href="../classes/RSpecProf.html">RSpecProf</a> would be expected to comply;
instead, <a href="../classes/RSpecProf.html">RSpecProf</a> will merely
raise an error and your specs will fail.

</li>
<li>I think that&#8216;s it.

</li>
</ul>
<h2>Note on Patches/Pull Requests</h2>
<ul>
<li>Fork the project.

</li>
<li>Make your feature addition or bug fix.

</li>
<li>Add tests for it. This is important so I don&#8216;t break it in a future
version unintentionally.

</li>
<li>Commit, do not mess with rakefile, version, or history. (if you want to
have your own version, that is fine but bump version in a commit by itself
I can ignore when I pull)

</li>
<li>Send me a pull request. Bonus points for topic branches.

</li>
</ul>
<h2>Copyright</h2>
<p>
Copyright (c) 2010 Colin MacKenzie IV. See LICENSE for details.
</p>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>